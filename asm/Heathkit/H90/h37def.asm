;;      H37DEF - H37 DISK CONTROLLER DEFINITIONS

DK.PORT EQU     170Q            ; BASE UART PORT

FD.STAT EQU     DK.PORT+2       ; STATUS PORT
FD.CMD  EQU     DK.PORT+2       ; COMMAND PORT
FD.TRK  EQU     DK.PORT+3       ; TRACK REGISTER
FD.SEC  EQU     DK.PORT+2       ; SECTOR REGISTER
FD.DAT  EQU     DK.PORT+3       ; DATA PORT
DK.CON  EQU     DK.PORT         ; CONTROL PORT
DK.INT  EQU     DK.PORT+1       ; INTERFACE CONTROL

;;      COMMANDS SENT TO FD.CMD

FDC.RST EQU      00000000B      ; RESTORE
FDC.SEK EQU      00010000B      ; SEEK TRACK IN FD.TRK
FDC.STP EQU      00100000B      ; STEP IN SAME DIR AS LAST
FDC.STI EQU      01000000B      ; STEP IN
FDC.STO EQU      01100000B      ; STEP OUT

FDC.RDS EQU      1000000B       ; READ SECTOR
FDC.WTS EQU      10100000B      ; WRITE SECTOR

FDC.RDA EQU      11000000B      ; READ ADDRESS
FDC.RDT EQU      11100000B      ; READ TRACK
FDC.WTT EQU      11110000B      ; WRITE TRACK

FDC.FI  EQU      11010000B      ; FORCE INTERRUPT

;;      OPTIONS FOR FDC.RST THRU FDC.STO

FDF.UTR EQU     00010000B       ; UPDATE TRACK REGISTER
FDF.HLB EQU     00001000B       ; LOAD HEAD AT BEGINNING
FDF.VRF EQU     00000100B       ; VERIFY DESTINATION

FDF.S6  EQU     00000000B       ; STEP  6 MS
FDF.S12 EQU     00000001B       ; STEP 12 MS
FDF.S20 EQU     00000010B       ; STEP 20 MS
FDF.S30 EQU     00000011B       ; STEP 30 MS

;;      OPTIONS FOR FDC.RDS THRU FDC.WTT

FDF.MRF EQU     00010000B       ; MULTI RECORD FLAG
FDF.SLF EQU     00001000B       ; SECTOR LENGTH SHIFT RIGHT
FDF.DLF EQU     00000100B       ; 15 (30) MS DELAY
FDF.SS1 EQU     00000010B       ; SELECT SIDE 1
FDF.DDM EQU     00000001B       ; DELETED DATA MARK

;;      STATUS BIT DEFINITIONS

FDS.NRD EQU     10000000B       ; NOT READY
FDS.WPV EQU     01000000B       ; WRITE PROTECT
FDS.HLD EQU     00100000B       ; HEAD IS LOADED
FDS.RTE EQU     00100000B       ; RECORD TYPE
FDS.WTF EQU     00100000B       ; WRITE FAULT
FDS.SEK EQU     00010000B       ; SEEK ERROR
FDS.RNF EQU     00010000B       ; RECORD NOT FOUND
FDS.CRC EQU     00001000B       ; CRC ERROR
FDS.TK0 EQU     00000100B       ; OVER TRACK ZERO
FDS.LDT EQU     00000100B       ; LOST DATA
FDS.IND EQU     00000010B       ; INDEX PULSE
FDS.DRQ EQU     00000010B       ; DATA REQUEST
FDS.BSY EQU     00000001B       ; BUSY

;       BITS SET IN DK.CON

CON.EI  EQU     00000001B       ; ENABLE INT-REQ
CON.DRQ EQU     00000010B       ; ENABLE DRQ INTERRUPT
CON.MFM EQU     00000100B       ; SET MFM RECORDING
CON.MO  EQU     00001000B       ; ALL MOTORS ON
CON.DS0 EQU     00010000B       ; DRIVE 0
CON.DS1 EQU     00100000B       ; DRIVE 1

;       Bits set to select alternate registers

CON.CD  EQU     00000000B       ; SELECT COMMAND/DATA
CON.ST  EQU     00000001B       ; SELECT SECTOR/TRACK
