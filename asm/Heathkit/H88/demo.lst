 AS V1.42 Beta [Bld 288] - Source File demo.asm - Page 1 - 11/19/2025 11:14:01 AM


    1/      0 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2/      0 :                         ;
    3/      0 :                         ;       DEMO: MTR-88
    4/      0 :                         ;
    5/      0 :                         ;       SYSTEM DEFINITIONS
    6/      0 :                         ;
    7/      0 : =2.136O                 ALARM   EQU     1136Q           ; MAKE NOISE
    8/      0 : =3.302O                 WCC     EQU     1702Q           ; WRITE CHAR TO CONSOLE
    9/      0 : =40.010O                MFLAG   EQU     20010Q          ; USER FLAG OPTIONS
   10/      0 : =40.037O                UIVEC   EQU     20037Q          ; USER INTERRUPT VECTOR
   11/      0 : =1O                     UO.CLK  EQU     1Q              ; ALLOW CLOCK INTERRUPT PROCESSING
   12/      0 : =303O                   MI.JMP  EQU     303Q            ; MACHINE INSTRUCTION JUMP
   13/      0 : =3.066O                 IOB     EQU     1466Q           ; INPUT OCTAL BYTE
   14/      0 : =5.343O                 TOB     EQU     2743Q           ; TYPE OCTAL BYTE
   15/      0 :                         
   16/      0 : =33O                    ESC     EQU     33Q
   17/      0 : =15O                    CR      EQU     15Q
   18/      0 : =12O                    LF      EQU     12Q
   19/      0 :                         
   20/ 40.100 :                                 ORG     20100Q
   21/ 40.100 :                         
   22/ 40.100 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   23/ 40.100 :                         ;
   24/ 40.100 :                         ;       ERASE SCREEN
   25/ 40.100 :                         ;
   26/ 40.100 : 076 033                 MTR88   MVI     A,ESC           ; ESCAPE SEQUENCE TO
   27/ 40.102 : 315 302 003                     CALL    WCC
   28/ 40.105 : 076 105                         MVI     A,'E'           ;     ERASE SCREEN
   29/ 40.107 : 315 302 003                     CALL    WCC
   30/ 40.112 :                         
   31/ 40.112 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   32/ 40.112 :                         ;
   33/ 40.112 :                         ;       READ A OCTAL INTEGER FROM KEYBOARD
   34/ 40.112 :                         ;          STORE THE NUMBER.
   35/ 40.112 :                         ;
   36/ 40.112 : 041 234 040                     LXI     H,NUMBER        ; GET ADDRESS OF NUMBER
   37/ 40.115 : 247                             ANA     A               ; CLEAR CARRY (SIDE EFFECT)
   38/ 40.116 : 315 066 003                     CALL    IOB             ; INPUT OCTAL BYTE
   39/ 40.121 : 315 223 040                     CALL    SETICK          ; SETUP TICK TO 500 FOR ONE SEC
   40/ 40.124 :                         
   41/ 40.124 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   42/ 40.124 :                         ;
   43/ 40.124 :                         ;       INITIALIZE SERVICE INTERRUPT ROUTINE
   44/ 40.124 :                         ;          LOAD THE USER INTERRUPT VECTOR (UIVEC) WITH A
   45/ 40.124 :                         ;          JUMP INSTRUCTION AND THE ADDRESS OF THE SERVICE
   46/ 40.124 :                         ;          ROUTINE.  ENABLE USER CLOCK INTERRUPT!
   47/ 40.124 :                         ;
   48/ 40.124 : 076 303                         MVI     A,MI.JMP        ; SET-UP JUMP INSTRUCTION
   49/ 40.126 : 062 037 040                     STA     UIVEC           ; STORE 'JMP' INSTRUCTION
   50/ 40.131 : 041 165 040                     LXI     H,INTRP         ;    USER INTERRUPT ADDRESS
   51/ 40.134 : 042 040 040                     SHLD    UIVEC+1         ;       POSITIONED
   52/ 40.137 : 076 001                         MVI     A,UO.CLK
   53/ 40.141 : 062 010 040                     STA     MFLAG           ; ENABLE CLOCK INTERRUPT
   54/ 40.144 :                         
   55/ 40.144 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   56/ 40.144 :                         ;
   57/ 40.144 :                         ;       WAIT FOR CLOCK TO REACH ZERO
   58/ 40.144 :                         ;
   59/ 40.144 : 072 234 040             LOOP    LDA     NUMBER          ; DO NOTHING LOOP.
   60/ 40.147 : 376 000                         CPI     0               ;    WAIT FOR END
 AS V1.42 Beta [Bld 288] - Source File demo.asm - Page 2 - 11/19/2025 11:14:01 AM


   61/ 40.151 : 302 144 040                     JNZ     LOOP            ;    OF COUNT DOWN.
   62/ 40.154 :                         
   63/ 40.154 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   64/ 40.154 :                         ;
   65/ 40.154 :                         ;       RETURN TO NORMAL INTERRUPT STATUS & HALT
   66/ 40.154 :                         ;          DISABLE INTERRUPT & TURN ON SPEAKER
   67/ 40.154 :                         ;
   68/ 40.154 : 076 000                         MVI     A,0
   69/ 40.156 : 062 010 040                     STA     MFLAG           ; DISABLE CLOCK INTERRUPT
   70/ 40.161 : 315 136 002                     CALL    ALARM
   71/ 40.164 : 166                             HLT
   72/ 40.165 :                         
   73/ 40.165 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   74/ 40.165 :                         ;
   75/ 40.165 :                         ;       INTERRUPT ROUTINE
   76/ 40.165 :                         ;          CLOCK AND DISPLAY INTERRUPT
   77/ 40.165 :                         ;
   78/ 40.165 : 052 232 040             INTRP   LHLD    TICK            ; GET COUNT (BETWEEN 0 & 500)
   79/ 40.170 : 053                             DCX     H               ; TICK=TICK-1
   80/ 40.171 : 042 232 040                     SHLD    TICK            ; STORE COUNT
   81/ 40.174 : 175                             MOV     A,L             ; TEST FOR ZERO
   82/ 40.175 : 264                             ORA     H               ;    COMPARE WITH 'H'
   83/ 40.176 : 300                             RNZ                     ;    EXIT IF .NE. 0
   84/ 40.177 :                         
   85/ 40.177 :                         ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   86/ 40.177 :                         ;
   87/ 40.177 :                         ;       UPDATE DISPLAY FOR 'NEW' NUMBER.
   88/ 40.177 :                         ;
   89/ 40.177 : 076 015                         MVI     A,CR            ; DO CARRIAGE RETURN
   90/ 40.201 : 315 302 003                     CALL    WCC
   91/ 40.204 : 076 012                         MVI     A,LF            ;    AND LINE FEED
   92/ 40.206 : 315 302 003                     CALL    WCC
   93/ 40.211 : 072 234 040                     LDA     NUMBER          ; GET NUMBER
   94/ 40.214 : 075                             DCR     A               ; NUMBER=NUMBER-1
   95/ 40.215 : 062 234 040                     STA     NUMBER          ; SAVE NUMBER
   96/ 40.220 : 315 343 005                     CALL    TOB             ; TYPE OCTAL BYTE
   97/ 40.223 : 041 364 001             SETICK  LXI     H,500           ; RESTORE COUNT
   98/ 40.226 : 042 232 040                     SHLD    TICK            ;   WITH 500
   99/ 40.231 : 311                             RET
  100/ 40.232 :                         
  101/ 40.232 :                         ;       STORAGE AREA & END ASSEMBLY
  102/ 40.232 :                         TICK    DS      2
  103/ 40.234 :                         NUMBER  DS      1
  104/ 40.235 :                                 END
 AS V1.42 Beta [Bld 288] - Source File demo.asm - Page 3 - 11/19/2025 11:14:01 AM


  Symbol Table (* = unused):
  --------------------------

 ALARM :                      2.136 - |
*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*CASESENSITIVE :                  0 - | *CONSTPI :     3.141592653589793239 - |
 CR :                            15 - | *DATE :                "11/19/2025" - |
 ESC :                           33 - | *FALSE :                          0 - |
*FLOATMAX :   1.18973149535725E4932 - | *HAS64 :                          1 - |
 INTRP :                     40.165 C |  IOB :                        3.066 - |
 LF :                            12 - | *LISTON :                         1 - |
 LOOP :                      40.144 C | *MACEXP :                         7 - |
 MFLAG :                     40.010 - |  MI.JMP :                       303 - |
*MOMCPU :                   200.200 - | *MOMCPUNAME :                "8080" - |
*MTR88 :                     40.100 C | *NESTMAX :                    1.000 - |
 NUMBER :                    40.234 C | *RELAXED :                        0 - |
 SETICK :                    40.223 C |  TICK :                      40.232 C |
*TIME :               "11:14:01 AM" - |  TOB :                        5.343 - |
*TRUE :                           1 - |  UIVEC :                     40.037 - |
 UO.CLK :                         1 - | *VERSION :                   24.057 - |
 WCC :                        3.302 - | *Z80SYNTAX :                      0 - |

     34 symbols
     18 unused symbols

 AS V1.42 Beta [Bld 288] - Source File demo.asm - Page 4 - 11/19/2025 11:14:01 AM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.00 seconds assembly time

    105 lines source file
      2 passes
      0 errors
      0 warnings
